import os
import threading
import base64
import requests
import sqlite3

from flask import request, Response, Flask, render_template, logging, make_response, jsonify, send_from_directory
from werkzeug.utils import redirect, secure_filename

from click_jacking import click_jacking
from cors_Domain import cors_domain
from xss_protection import xss_Protection
from ip_add import ip

app = Flask(__name__)

@app.route("/")
def home():
    resp = make_response(render_template('home.html'))
    # resp.headers['Access-Control-Allow-Origin'] = '*'
    del resp.headers['Content-Type']
    resp.headers['Content-Type'] = 'text/html'
    resp.headers['x-content-type-options'] = 'nosniff'
    resp.headers['Access-Control-Allow-Origin'] = '*'

    return resp

@app.route('/home_night')
def night_1():
    return render_template('home_night.html')


@app.route("/about")
def about():
    return render_template('about.html')


@app.route('/about_night')
def about_night():
    return render_template('about_night.html')


@app.route('/severity')
def severity():
    return render_template('severity.html')


@app.route('/severity_night')
def severity_night():
    return render_template('severity_night.html')


@app.route('/contact')
def contact():
    return render_template('contact.html')


@app.route('/contact_night')
def contact_night():
    return render_template('contact_night.html')


@app.route('/scan')
def scan():

    click=click_jacking()
    b=click.click_jackingfun()

    geo=ip()
    c=geo.geo_Ip()


    xss=xss_Protection()
    d=xss.xss_protect()

    cors=cors_domain()
    e=cors.cors_checker()

    print(b[0])

    return render_template("scan.html",username=b[0],print1=b[1],bool_flag=b[2], ip = c[0], country = c[1], latitude = c[2], longitude = c[3], server = c[4],print2=d[0],bool_flag2=d[1],print3=e[0],bool_flag3=e[1])


if __name__ == "__main__":
    app.run(host='192.168.1.4',port=8001,debug=True)
